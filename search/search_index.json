{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Onzr, the one-hour-late Deezer \ud83d\udc9c CLI.","text":"<p>Pronounced onze heure (11 O-Clock \u00e0-la-fran\u00e7aise) \ud83e\udd21</p> <p> </p> <p>Warning</p> <p>This project is still at an early stage. It works in its core parts, but will not meet standard requirements for a decent player.</p> <p></p>"},{"location":"#requirements","title":"Requirements","text":"<ul> <li>Python: 3.11+</li> <li>VLC: we use VLC bindings to   play tracks, so this is a strict requirement.</li> </ul>"},{"location":"#quick-start-guide","title":"Quick start guide","text":"<p>Onzr is a python package, it can be installed using Pip (or any other package manager you may use):</p> <pre><code>pip install --user onzr\n</code></pre> <p>Once installed the <code>onzr</code> command should be available (if not check your <code>PATH</code> definition). Before using Onzr, you should configure it (once for all):</p> <pre><code>onzr init\n</code></pre> <p>This command will prompt for an <code>ARL</code> token. If you don't know how to find it, please follow this guide.</p> <p>You may now explore commands and their usage:</p> <pre><code>onzr --help\n</code></pre> <p>Onzr is based on an HTTP client/server architecture, hence, once installed, you should run the server before starting to use it:</p> <pre><code>onzr serve --log-level error &amp;\n</code></pre> <p>In this case, the server is ran as a background job; see the <code>serve</code> command documentation for details about running Onzr server.</p> <p>Play your first album:</p> <pre><code>onzr search --artist \"Billie Eilish\" --ids --first | \\\n    onzr artist --albums --ids --limit 1 - | \\\n    onzr album --ids - | \\\n    onzr add - &amp;&amp; \\\n    onzr play\n</code></pre> <p>Aaand, tada \ud83c\udf89</p> <p>In this command, we look for the latest Billie Eilish album, add it to the queue and play it instantly!</p>"},{"location":"#documentation","title":"Documentation","text":"<p>The complete documentation of the project is available at: https://jmaupetit.github.io/onzr/</p>"},{"location":"#license","title":"License","text":"<p>This work is released under the MIT License.</p>"},{"location":"api/","title":"HTTP API","text":""},{"location":"api/#onzr-010","title":"Onzr 0.1.0","text":""},{"location":"api/#endpoints","title":"Endpoints","text":""},{"location":"api/#get-queue","title":"GET /queue/","text":"<p>Queue List</p> Description <p>List queue tracks.</p> <p> Response 200 OK </p> application/json <p><pre><code>{\n    \"playing\": null,\n    \"tracks\": [\n        {\n            \"current\": true,\n            \"position\": 0,\n            \"track\": {\n                \"id\": 0,\n                \"title\": \"string\",\n                \"album\": \"string\",\n                \"artist\": \"string\",\n                \"release_date\": null\n            }\n        }\n    ]\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.</p> Schema of the response body <pre><code>{\n    \"properties\": {\n        \"playing\": {\n            \"anyOf\": [\n                {\n                    \"type\": \"integer\"\n                },\n                {\n                    \"type\": \"null\"\n                }\n            ],\n            \"title\": \"Playing\"\n        },\n        \"tracks\": {\n            \"items\": {\n                \"$ref\": \"#/components/schemas/QueuedTrack\"\n            },\n            \"type\": \"array\",\n            \"title\": \"Tracks\"\n        }\n    },\n    \"type\": \"object\",\n    \"required\": [\n        \"playing\",\n        \"tracks\"\n    ],\n    \"title\": \"QueuedTracks\",\n    \"description\": \"Queued Tracks list.\"\n}\n</code></pre>"},{"location":"api/#post-queue","title":"POST /queue/","text":"<p>Queue Add</p> Description <p>Add tracks to queue given their identifiers.</p> <p>Request body</p> application/json <p><pre><code>[\n    0\n]\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.</p> Schema of the request body <pre><code>{\n    \"items\": {\n        \"type\": \"integer\"\n    },\n    \"type\": \"array\",\n    \"title\": \"Track Ids\"\n}\n</code></pre> <p> Response 200 OK </p> application/json <p><pre><code>{\n    \"message\": \"string\"\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.</p> Schema of the response body <pre><code>{\n    \"properties\": {\n        \"message\": {\n            \"type\": \"string\",\n            \"title\": \"Message\"\n        }\n    },\n    \"type\": \"object\",\n    \"required\": [\n        \"message\"\n    ],\n    \"title\": \"ServerMessage\",\n    \"description\": \"Generic server message.\"\n}\n</code></pre> <p> Response 422 Unprocessable Entity </p> application/json <p><pre><code>{\n    \"detail\": [\n        {\n            \"loc\": [\n                null\n            ],\n            \"msg\": \"string\",\n            \"type\": \"string\"\n        }\n    ]\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.</p> Schema of the response body <pre><code>{\n    \"properties\": {\n        \"detail\": {\n            \"items\": {\n                \"$ref\": \"#/components/schemas/ValidationError\"\n            },\n            \"type\": \"array\",\n            \"title\": \"Detail\"\n        }\n    },\n    \"type\": \"object\",\n    \"title\": \"HTTPValidationError\"\n}\n</code></pre>"},{"location":"api/#delete-queue","title":"DELETE /queue/","text":"<p>Queue Clear</p> Description <p>Clear tracks queue.</p> <p> Response 200 OK </p> application/json <p><pre><code>{\n    \"player\": \"string\",\n    \"queue\": {\n        \"playing\": null,\n        \"queued\": 0\n    }\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.</p> Schema of the response body <pre><code>{\n    \"properties\": {\n        \"player\": {\n            \"type\": \"string\",\n            \"title\": \"Player\"\n        },\n        \"queue\": {\n            \"$ref\": \"#/components/schemas/QueueState\"\n        }\n    },\n    \"type\": \"object\",\n    \"required\": [\n        \"player\",\n        \"queue\"\n    ],\n    \"title\": \"ServerState\",\n    \"description\": \"Onzr server state.\"\n}\n</code></pre>"},{"location":"api/#get-queuerankstream","title":"GET /queue/{rank}/stream","text":"<p>Stream Track</p> Description <p>Stream Deezer track given its identifer.</p> <p>Input parameters</p> Parameter In Type Default Nullable Description <code>rank</code> path integer No <p> Response 200 OK </p> application/json Schema of the response body <pre><code>\n</code></pre> <p> Response 422 Unprocessable Entity </p> application/json <p><pre><code>{\n    \"detail\": [\n        {\n            \"loc\": [\n                null\n            ],\n            \"msg\": \"string\",\n            \"type\": \"string\"\n        }\n    ]\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.</p> Schema of the response body <pre><code>{\n    \"properties\": {\n        \"detail\": {\n            \"items\": {\n                \"$ref\": \"#/components/schemas/ValidationError\"\n            },\n            \"type\": \"array\",\n            \"title\": \"Detail\"\n        }\n    },\n    \"type\": \"object\",\n    \"title\": \"HTTPValidationError\"\n}\n</code></pre>"},{"location":"api/#get-now","title":"GET /now","text":"<p>Now Playing</p> Description <p>Get info about current track.</p> <p> Response 200 OK </p> application/json <p><pre><code>{\n    \"player\": {\n        \"state\": \"string\",\n        \"length\": 0,\n        \"time\": 0,\n        \"position\": 10.12\n    },\n    \"track\": null\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.</p> Schema of the response body <pre><code>{\n    \"properties\": {\n        \"player\": {\n            \"$ref\": \"#/components/schemas/PlayerState\"\n        },\n        \"track\": {\n            \"anyOf\": [\n                {\n                    \"$ref\": \"#/components/schemas/TrackShort\"\n                },\n                {\n                    \"type\": \"null\"\n                }\n            ]\n        }\n    },\n    \"type\": \"object\",\n    \"required\": [\n        \"player\"\n    ],\n    \"title\": \"PlayingState\",\n    \"description\": \"Playing player state.\"\n}\n</code></pre>"},{"location":"api/#post-play","title":"POST /play","text":"<p>Play</p> Description <p>Start playing current queue.</p> <p>Request body</p> application/json <p><pre><code>{\n    \"rank\": null\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.</p> Schema of the request body <pre><code>{\n    \"properties\": {\n        \"rank\": {\n            \"anyOf\": [\n                {\n                    \"type\": \"integer\",\n                    \"minimum\": 0.0\n                },\n                {\n                    \"type\": \"null\"\n                }\n            ],\n            \"title\": \"Rank\"\n        }\n    },\n    \"type\": \"object\",\n    \"title\": \"PlayQueryParams\",\n    \"description\": \"Play endpoint parameters.\"\n}\n</code></pre> <p> Response 200 OK </p> application/json <p><pre><code>{\n    \"action\": \"string\",\n    \"state\": {\n        \"player\": \"string\",\n        \"queue\": {\n            \"playing\": null,\n            \"queued\": 0\n        }\n    }\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.</p> Schema of the response body <pre><code>{\n    \"properties\": {\n        \"action\": {\n            \"type\": \"string\",\n            \"title\": \"Action\"\n        },\n        \"state\": {\n            \"$ref\": \"#/components/schemas/ServerState\"\n        }\n    },\n    \"type\": \"object\",\n    \"required\": [\n        \"action\",\n        \"state\"\n    ],\n    \"title\": \"PlayerControl\",\n    \"description\": \"Player controls.\"\n}\n</code></pre> <p> Response 422 Unprocessable Entity </p> application/json <p><pre><code>{\n    \"detail\": [\n        {\n            \"loc\": [\n                null\n            ],\n            \"msg\": \"string\",\n            \"type\": \"string\"\n        }\n    ]\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.</p> Schema of the response body <pre><code>{\n    \"properties\": {\n        \"detail\": {\n            \"items\": {\n                \"$ref\": \"#/components/schemas/ValidationError\"\n            },\n            \"type\": \"array\",\n            \"title\": \"Detail\"\n        }\n    },\n    \"type\": \"object\",\n    \"title\": \"HTTPValidationError\"\n}\n</code></pre>"},{"location":"api/#post-pause","title":"POST /pause","text":"<p>Pause</p> Description <p>Pause/resume playing.</p> <p> Response 200 OK </p> application/json <p><pre><code>{\n    \"action\": \"string\",\n    \"state\": {\n        \"player\": \"string\",\n        \"queue\": {\n            \"playing\": null,\n            \"queued\": 0\n        }\n    }\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.</p> Schema of the response body <pre><code>{\n    \"properties\": {\n        \"action\": {\n            \"type\": \"string\",\n            \"title\": \"Action\"\n        },\n        \"state\": {\n            \"$ref\": \"#/components/schemas/ServerState\"\n        }\n    },\n    \"type\": \"object\",\n    \"required\": [\n        \"action\",\n        \"state\"\n    ],\n    \"title\": \"PlayerControl\",\n    \"description\": \"Player controls.\"\n}\n</code></pre>"},{"location":"api/#post-stop","title":"POST /stop","text":"<p>Stop</p> Description <p>Stop playing.</p> <p> Response 200 OK </p> application/json <p><pre><code>{\n    \"action\": \"string\",\n    \"state\": {\n        \"player\": \"string\",\n        \"queue\": {\n            \"playing\": null,\n            \"queued\": 0\n        }\n    }\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.</p> Schema of the response body <pre><code>{\n    \"properties\": {\n        \"action\": {\n            \"type\": \"string\",\n            \"title\": \"Action\"\n        },\n        \"state\": {\n            \"$ref\": \"#/components/schemas/ServerState\"\n        }\n    },\n    \"type\": \"object\",\n    \"required\": [\n        \"action\",\n        \"state\"\n    ],\n    \"title\": \"PlayerControl\",\n    \"description\": \"Player controls.\"\n}\n</code></pre>"},{"location":"api/#post-next","title":"POST /next","text":"<p>Next</p> Description <p>Play next track in queue.</p> <p> Response 200 OK </p> application/json <p><pre><code>{\n    \"action\": \"string\",\n    \"state\": {\n        \"player\": \"string\",\n        \"queue\": {\n            \"playing\": null,\n            \"queued\": 0\n        }\n    }\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.</p> Schema of the response body <pre><code>{\n    \"properties\": {\n        \"action\": {\n            \"type\": \"string\",\n            \"title\": \"Action\"\n        },\n        \"state\": {\n            \"$ref\": \"#/components/schemas/ServerState\"\n        }\n    },\n    \"type\": \"object\",\n    \"required\": [\n        \"action\",\n        \"state\"\n    ],\n    \"title\": \"PlayerControl\",\n    \"description\": \"Player controls.\"\n}\n</code></pre>"},{"location":"api/#post-previous","title":"POST /previous","text":"<p>Previous</p> Description <p>Play previous track in queue.</p> <p> Response 200 OK </p> application/json <p><pre><code>{\n    \"action\": \"string\",\n    \"state\": {\n        \"player\": \"string\",\n        \"queue\": {\n            \"playing\": null,\n            \"queued\": 0\n        }\n    }\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.</p> Schema of the response body <pre><code>{\n    \"properties\": {\n        \"action\": {\n            \"type\": \"string\",\n            \"title\": \"Action\"\n        },\n        \"state\": {\n            \"$ref\": \"#/components/schemas/ServerState\"\n        }\n    },\n    \"type\": \"object\",\n    \"required\": [\n        \"action\",\n        \"state\"\n    ],\n    \"title\": \"PlayerControl\",\n    \"description\": \"Player controls.\"\n}\n</code></pre>"},{"location":"api/#get-state","title":"GET /state","text":"<p>State</p> Description <p>Server state.</p> <p> Response 200 OK </p> application/json <p><pre><code>{\n    \"player\": \"string\",\n    \"queue\": {\n        \"playing\": null,\n        \"queued\": 0\n    }\n}\n</code></pre> \u26a0\ufe0f This example has been generated automatically from the schema and it is not accurate. Refer to the schema for more information.</p> Schema of the response body <pre><code>{\n    \"properties\": {\n        \"player\": {\n            \"type\": \"string\",\n            \"title\": \"Player\"\n        },\n        \"queue\": {\n            \"$ref\": \"#/components/schemas/QueueState\"\n        }\n    },\n    \"type\": \"object\",\n    \"required\": [\n        \"player\",\n        \"queue\"\n    ],\n    \"title\": \"ServerState\",\n    \"description\": \"Onzr server state.\"\n}\n</code></pre>"},{"location":"api/#get-ping","title":"GET /ping","text":"<p>Ping</p> Description <p>Server ping.</p> <p> Response 200 OK </p> application/json Schema of the response body"},{"location":"api/#schemas","title":"Schemas","text":""},{"location":"api/#httpvalidationerror","title":"HTTPValidationError","text":"Name Type <code>detail</code> Array&lt;ValidationError&gt;"},{"location":"api/#playercontrol","title":"PlayerControl","text":"Name Type <code>action</code> string <code>state</code> ServerState"},{"location":"api/#playerstate","title":"PlayerState","text":"Name Type <code>length</code> integer <code>position</code> number <code>state</code> string <code>time</code> integer"},{"location":"api/#playingstate","title":"PlayingState","text":"Name Type <code>player</code> PlayerState <code>track</code>"},{"location":"api/#playqueryparams","title":"PlayQueryParams","text":"Name Type <code>rank</code>"},{"location":"api/#queuedtrack","title":"QueuedTrack","text":"Name Type <code>current</code> boolean <code>position</code> integer <code>track</code> TrackShort"},{"location":"api/#queuedtracks","title":"QueuedTracks","text":"Name Type <code>playing</code> <code>tracks</code> Array&lt;QueuedTrack&gt;"},{"location":"api/#queuestate","title":"QueueState","text":"Name Type <code>playing</code> <code>queued</code> integer"},{"location":"api/#servermessage","title":"ServerMessage","text":"Name Type <code>message</code> string"},{"location":"api/#serverstate","title":"ServerState","text":"Name Type <code>player</code> string <code>queue</code> QueueState"},{"location":"api/#trackshort","title":"TrackShort","text":"Name Type <code>album</code> string <code>artist</code> string <code>id</code> integer <code>release_date</code> <code>title</code> string"},{"location":"api/#validationerror","title":"ValidationError","text":"Name Type <code>loc</code> Array&lt;&gt; <code>msg</code> string <code>type</code> string"},{"location":"code_of_conduct/","title":"Contributor Covenant Code of Conduct","text":""},{"location":"code_of_conduct/#our-pledge","title":"Our Pledge","text":"<p>We as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone, regardless of age, body size, visible or invisible disability, ethnicity, sex characteristics, gender identity and expression, level of experience, education, socio-economic status, nationality, personal appearance, race, caste, color, religion, or sexual identity and orientation.</p> <p>We pledge to act and interact in ways that contribute to an open, welcoming, diverse, inclusive, and healthy community.</p>"},{"location":"code_of_conduct/#our-standards","title":"Our Standards","text":"<p>Examples of behavior that contributes to a positive environment for our community include:</p> <ul> <li>Demonstrating empathy and kindness toward other people</li> <li>Being respectful of differing opinions, viewpoints, and experiences</li> <li>Giving and gracefully accepting constructive feedback</li> <li>Accepting responsibility and apologizing to those affected by our mistakes,   and learning from the experience</li> <li>Focusing on what is best not just for us as individuals, but for the overall   community</li> </ul> <p>Examples of unacceptable behavior include:</p> <ul> <li>The use of sexualized language or imagery, and sexual attention or advances of   any kind</li> <li>Trolling, insulting or derogatory comments, and personal or political attacks</li> <li>Public or private harassment</li> <li>Publishing others' private information, such as a physical or email address,   without their explicit permission</li> <li>Other conduct which could reasonably be considered inappropriate in a   professional setting</li> </ul>"},{"location":"code_of_conduct/#enforcement-responsibilities","title":"Enforcement Responsibilities","text":"<p>Community leaders are responsible for clarifying and enforcing our standards of acceptable behavior and will take appropriate and fair corrective action in response to any behavior that they deem inappropriate, threatening, offensive, or harmful.</p> <p>Community leaders have the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct, and will communicate reasons for moderation decisions when appropriate.</p>"},{"location":"code_of_conduct/#scope","title":"Scope","text":"<p>This Code of Conduct applies within all community spaces, and also applies when an individual is officially representing the community in public spaces. Examples of representing our community include using an official email address, posting via an official social media account, or acting as an appointed representative at an online or offline event.</p>"},{"location":"code_of_conduct/#enforcement","title":"Enforcement","text":"<p>Instances of abusive, harassing, or otherwise unacceptable behavior may be reported to the community leaders responsible for enforcement at abuse+onzr@maupetit.net. All complaints will be reviewed and investigated promptly and fairly.</p> <p>All community leaders are obligated to respect the privacy and security of the reporter of any incident.</p>"},{"location":"code_of_conduct/#enforcement-guidelines","title":"Enforcement Guidelines","text":"<p>Community leaders will follow these Community Impact Guidelines in determining the consequences for any action they deem in violation of this Code of Conduct:</p>"},{"location":"code_of_conduct/#1-correction","title":"1. Correction","text":"<p>Community Impact: Use of inappropriate language or other behavior deemed unprofessional or unwelcome in the community.</p> <p>Consequence: A private, written warning from community leaders, providing clarity around the nature of the violation and an explanation of why the behavior was inappropriate. A public apology may be requested.</p>"},{"location":"code_of_conduct/#2-warning","title":"2. Warning","text":"<p>Community Impact: A violation through a single incident or series of actions.</p> <p>Consequence: A warning with consequences for continued behavior. No interaction with the people involved, including unsolicited interaction with those enforcing the Code of Conduct, for a specified period of time. This includes avoiding interactions in community spaces as well as external channels like social media. Violating these terms may lead to a temporary or permanent ban.</p>"},{"location":"code_of_conduct/#3-temporary-ban","title":"3. Temporary Ban","text":"<p>Community Impact: A serious violation of community standards, including sustained inappropriate behavior.</p> <p>Consequence: A temporary ban from any sort of interaction or public communication with the community for a specified period of time. No public or private interaction with the people involved, including unsolicited interaction with those enforcing the Code of Conduct, is allowed during this period. Violating these terms may lead to a permanent ban.</p>"},{"location":"code_of_conduct/#4-permanent-ban","title":"4. Permanent Ban","text":"<p>Community Impact: Demonstrating a pattern of violation of community standards, including sustained inappropriate behavior, harassment of an individual, or aggression toward or disparagement of classes of individuals.</p> <p>Consequence: A permanent ban from any sort of public interaction within the community.</p>"},{"location":"code_of_conduct/#attribution","title":"Attribution","text":"<p>This Code of Conduct is adapted from the Contributor Covenant, version 2.1, available at https://www.contributor-covenant.org/version/2/1/code_of_conduct.html.</p> <p>Community Impact Guidelines were inspired by Mozilla's code of conduct enforcement ladder.</p> <p>For answers to common questions about this code of conduct, see the FAQ at https://www.contributor-covenant.org/faq. Translations are available at https://www.contributor-covenant.org/translations.</p>"},{"location":"commands/","title":"Command Line Interface (CLI)","text":"<p>Remember that Onzr is a CLI (Command Line Interface) and that we love UNIX. That being said, you won't be surprised to pipe Onzr commands to achieve what you want.</p> <pre><code>onzr search --artist \"Lady Gaga\" --ids --first | \\\n    onzr artist --top --limit 20 --ids - | \\\n    onzr add -\n</code></pre> <p>In this example, we will be adding Lady Gaga's top 20 most listened tracks to the player queue.</p>"},{"location":"commands/#init","title":"<code>init</code>","text":"<p>The <code>init</code> command creates Onzr configuration file:</p> <pre><code>onzr init\n</code></pre> <p>It is supposed to be run once to be able to start the server or to use other commands.</p> <p>Tip</p> <p>This command will prompt for an <code>ARL</code> token. If you don't know how to find it, please follow this guide.</p>"},{"location":"commands/#config","title":"<code>config</code>","text":"<p>The <code>config</code> command provides various operations related to Onzr's configuration. By default, it will display your current configuration in YAML format.</p> <pre><code>onzr config\n</code></pre> <p>The output should look like:</p> <pre><code>ARL: \"configuredarl\"\n# QUALITY: MP3_128\n# DEBUG: false\n# SCHEMA: http\n# HOST: localhost\n# PORT: 9473\n# API_ROOT_URL: /api/v1\n# TRACK_STREAM_ENDPOINT: /queue/{rank}/stream\nDEEZER_BLOWFISH_SECRET: \"g4el58wc0zvf9na1\"\n# THEME:\n#   # Base palette\n#   primary_color: \"#9B6BDF\"\n#   secondary_color: \"#75D7EC\"\n#   tertiary_color: \"#E356A7\"\n#   # Entities\n#   title_color: \"#9B6BDF\"\n#   artist_color: \"#75D7EC\"\n#   album_color: \"#E356A7\"\n#   # Messages\n#   alert_color: \"red\"\n</code></pre> <p>Using the <code>--path</code> (or <code>-p</code>) option will only display the configuration file path:</p> <pre><code>onzr -p\n</code></pre> <pre><code>/home/johndoe/.config/onzr/settings.yaml\n</code></pre> <p>And you can also edit your configuration using the <code>--edit</code> (or <code>-e</code>):</p> <pre><code>onzr config -e\n</code></pre> <p>It will start your default editor with your configuration loaded. Save it and you're good to go.</p> <p>Tip</p> <p>You can set your default editor using the <code>$EDITOR</code> environment variable.</p>"},{"location":"commands/#serve","title":"<code>serve</code>","text":"<p>The <code>serve</code> command should be run once to start Onzr web server:</p> <pre><code>onzr serve\n</code></pre> <p>Once ran, Onzr server main instance is active (by default at: localhost:9473).</p> <p>Pro Tip \u2122</p> <p>You should launch a new terminal to run other commands communicating with the server.</p> <p>Alternatively, if you prefer to use the same terminal, you can run the server in the background and only print error (and higher) logger events:</p> <pre><code>onzr serve --log-level error &amp;\n</code></pre>"},{"location":"commands/#search","title":"<code>search</code>","text":"<p>Onzr works extensively using Deezer's identifiers (IDs) for artists, albums and tracks. As you may not know them (yet?), you can start exploring Deezer using the <code>search</code> command:</p> <pre><code>onzr search --help\n</code></pre> <p>You can search by artist, album or track using the corresponding flag, e.g. if you are looking for Lady Gaga:</p> <pre><code>onzr search --artist \"Lady Gaga\"\n</code></pre> <p>The command output looks like:</p> <p></p> <p>Use the <code>--ids</code> flag to only print identifiers to the standard output if your intent is to pipe your search result to another command (e.g. <code>artist</code> or <code>play</code>).</p> <pre><code>onzr search --artist \"Lady Gaga\" --ids --first | \\\n    onzr artist - \\ # (1)\n    --release # (2)\n</code></pre> <ol> <li>\ud83d\udca1 the <code>-</code> argument of the <code>artist</code> command indicates to read artist ID from <code>stdin</code></li> <li>the <code>--release</code> flag adds the <code>Released</code> column with tracks release date.</li> </ol> <p>Your search result piped to the artist command display the artist top tracks (with release dates):</p> <p></p> <p>Tip</p> <p>The <code>search</code> command <code>--strict</code> flag decreases fuzzyness in search results.</p>"},{"location":"commands/#artist","title":"<code>artist</code>","text":"<p>The <code>artist</code> command allows to explore artist top tracks and radios. So you want to explore Eric Clapton's world (ID <code>192</code>)?</p> <pre><code>onzr artist --top 192\n</code></pre> <p>Tip</p> <p>Remember: you can use the <code>search</code> command as a starting point to achieve the same task if you don't remember artists IDs (I don't \ud83d\ude05):</p> <pre><code>onzr search --artist \"Eric Clapton\" --ids --first | \\\n    onzr artist --top -\n</code></pre> <p>And there it is! Eric Clapton's top tracks:</p> <p></p> <p>Do you prefer a radio inspired by Eric Clapton?</p> <pre><code>onzr artist --radio 192 --limit 8\n</code></pre> <p>Enjoy:</p> <p></p> <p>You can also explore artist's albums using the <code>--albums</code> option:</p> <pre><code>onzr search --artist Radiohead --ids --first | \\\n    onzr artist --albums --limit 20 -\n</code></pre> <p>There you go, here is Radiohead's discography:</p> <p></p>"},{"location":"commands/#album","title":"<code>album</code>","text":"<p>The <code>album</code> command lists album tracks to check or play them:</p> <pre><code>onzr search --album \"Friday night in San Francisco\" --ids --first | \\\n    onzr album -\n</code></pre> <p>And there it is:</p> <p></p> <p>To play the entire album, don't forget to list only track ids and pass them to the <code>add</code> command:</p> <pre><code>onzr search --album \"Friday night in San Francisco\" --ids --first | \\\n    onzr album --ids - | \\\n    onzr add -\n</code></pre>"},{"location":"commands/#playlist","title":"<code>playlist</code>","text":"<p>The <code>playlist</code> command lists playlist tracks to check or play them:</p> <pre><code>onzr search --playlist \"Peaky blinders\" --ids --first | \\\n    onzr playlist -\n</code></pre> <p>And there it is:</p> <p></p>"},{"location":"commands/#mix","title":"<code>mix</code>","text":"<p>The <code>mix</code> command generates playlists using various artists definition. You can generate a \"The Big Four\" playlist on-the-fly as follow:</p> <pre><code>onzr mix --limit 2 Metallica Slayer Megadeth Anthrax\n</code></pre> <p>There is the magic \ud83d\udcab</p> <p></p> <p>Tip</p> <p>You may adapt the <code>--limit 10</code> option to have more or less tracks per-artist (defaults to <code>10</code>).</p> <p>Guess what? You can have more magic by generating a \"deep mix\" \ud83e\ude84</p> <pre><code>onzr mix --deep --limit 2 Metallica Slayer Megadeth Anthrax\n</code></pre> <p>Hello serendipity \ud83c\udf89</p> <p></p> <p>As expected, you can pipe your mix with the <code>--ids</code> flag to the <code>add</code> command:</p> <pre><code>onzr mix --ids --deep --limit 4 Metallica Slayer Megadeth Anthrax | \\\n    onzr add -\n</code></pre>"},{"location":"commands/#add","title":"<code>add</code>","text":"<p>The <code>add</code> allows you to add tracks to the queue. Tracks identifiers should be given as command arguments:</p> <pre><code>onzr add 4952889 4952964 15347301\n</code></pre> <p>This command adds 3 tracks to the queue.</p> <p>As already seen, you can read track identifiers from the standard input by using the <code>-</code> special identifier:</p> <pre><code>onzr search --track \"all along the watchtower\" --ids | \\\n    onzr add -\n</code></pre> <p>This command adds a track search result to the queue.</p>"},{"location":"commands/#queue","title":"<code>queue</code>","text":"<p>The <code>queue</code> command list tracks added to the queue:</p> <pre><code>onzr queue\n</code></pre>"},{"location":"commands/#clear","title":"<code>clear</code>","text":"<p>The <code>clear</code> command stops the player and removes all tracks from the queue:</p> <pre><code>onzr clear\n</code></pre>"},{"location":"commands/#now","title":"<code>now</code>","text":"<p>The <code>onzr now</code> command gives you details about the track being currently played:</p> <pre><code>onzr now\n</code></pre> <p>You can follow tracks being played in live using the <code>-f</code> option:</p> <pre><code>onzr now -f\n</code></pre> <p>Tip</p> <p>Hit Ctrl+C to kill the command and restore your shell prompt.</p>"},{"location":"commands/#play","title":"<code>play</code>","text":"<p>The <code>play</code> command does what it says: it (re-)starts playing queued tracks.</p> <pre><code>onzr search --artist \"Go go penguin\" --ids --first | \\\n    onzr artist --ids - | \\\n    onzr add - &amp;&amp; \\\n    onzr play\n</code></pre> <p>This command plays \"Go go penguin\" top tracks; considering an empty queue before starting the command.</p> <p>Considering you have already queued tracks, you can start playing a track in the queue given its rank (1-based numbering):</p> <pre><code>onzr play --rank 2\n</code></pre> <p>Tip</p> <p>You can get the track rank by listing queued tracks using the <code>onzr queue</code> command.</p>"},{"location":"commands/#pause","title":"<code>pause</code>","text":"<p>The <code>pause</code> command toggles the player pause state:</p> <pre><code>onzr pause\n</code></pre>"},{"location":"commands/#stop","title":"<code>stop</code>","text":"<p>The <code>stop</code> command stops the player:</p> <pre><code>onzr stop\n</code></pre>"},{"location":"commands/#next","title":"<code>next</code>","text":"<p>The <code>next</code> command plays the next track in queue:</p> <pre><code>onzr next\n</code></pre> <p>Note that it has no effect if you reach the end of the queue.</p>"},{"location":"commands/#previous","title":"<code>previous</code>","text":"<p>The <code>previous</code> command plays the previous track in queue:</p> <pre><code>onzr previous\n</code></pre> <p>Note that it has no effect if you reach the beginning of the queue.</p>"},{"location":"commands/#state","title":"<code>state</code>","text":"<p>The <code>state</code> command gives you info about the server (player and queue) state:</p> <pre><code>onzr state\n</code></pre>"},{"location":"commands/#version","title":"<code>version</code>","text":"<p>The <code>version</code> command is useful to know which version of Onzr you are running:</p> <pre><code>onzr version\n</code></pre>"},{"location":"commands/#openapi","title":"<code>openapi</code>","text":"<p>The <code>openapi</code> command prints the OpenAPI schema of Onzr HTTP API in JSON format.</p> <pre><code>onzr openapi\n</code></pre>"},{"location":"configuration/","title":"Configuration","text":"<p>Onzr can be set either by defining environment variables or a configuration file.</p> <p>This configuration file respects general and specific rules that we will describe in detail in the following sections.</p>"},{"location":"configuration/#general-rules","title":"General rules","text":""},{"location":"configuration/#use-onzr-init-to-bootstrap-your-configuration","title":"Use <code>onzr init</code> to bootstrap your configuration","text":"<p>Onzr CLI comes with a <code>init</code> command that can help you boostraping your project (see the tutorial). Remember that the <code>onzr init</code> command will generate the configuration file for you. Once generated it's up to you to change setting values to suit your needs.</p>"},{"location":"configuration/#configuration-file-location","title":"Configuration file location","text":"<p>Onzr configuration file is stored inside your user's application folder. Depending on your system, the default path is likely:</p> <ul> <li>MacOSX: <code>~/Library/Application Support/onzr/settings.yaml</code></li> <li>Windows: <code>%appdata%\\onzr\\settings.yaml</code>, which usually expands to   <code>C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\onzr\\settings.yaml</code></li> <li>Linux: <code>~/.config/onzr/settings.yaml</code></li> </ul>"},{"location":"configuration/#settings-can-be-overridden-using-environment-variables","title":"Settings can be overridden using environment variables","text":"<p>Every setting can be overridden by defining the corresponding environment variable (in uppercase) prefixed by <code>ONZR_</code>, e.g. for the <code>DEBUG</code> setting, you can define the <code>ONZR_DEBUG=true</code> environment variable to override the value defined in the <code>settings.yaml</code> file.</p>"},{"location":"configuration/#configuration-details","title":"Configuration details","text":""},{"location":"configuration/#arl","title":"<code>ARL</code>","text":"<p>This is an authentication token provided by Deezer to connect to the Deezer gateway API.</p> <p>Info</p> <p>You can find this token by following this guide.</p>"},{"location":"configuration/#quality","title":"<code>QUALITY</code>","text":"<p>Default track encoding quality that will be streamed.</p> <p>Default: <code>MP3_128</code></p> <p>Info</p> <p>Allowed values are:</p> <ul> <li><code>MP3_128</code></li> <li><code>MP3_320</code></li> <li><code>FLAC</code></li> </ul>"},{"location":"configuration/#connection_pool_maxsize","title":"<code>CONNECTION_POOL_MAXSIZE</code>","text":"<p>Setup the HTTP requests connection pool maximal size, e.g. the maximal number of allowed concurrent requests for a session. Increasing this value will speed up response time when querying a lot of track informations for a huge playlist or tracks search.</p> <p>Default: <code>10</code></p> <p>Warning</p> <p>Set this configuration to a reasonnable value: not higher than 30. Deewer will rate-limit you in either way.</p>"},{"location":"configuration/#always_fetch_release_date","title":"<code>ALWAYS_FETCH_RELEASE_DATE</code>","text":"<p>When listing track details, by default track list don't show track release date (except for album tracks). If you want to always have this information, you can set this configuration to <code>true</code>. By doing so, you will systematically fetch track details from Deezer. You should know that this can slow down the CLI reactivity.</p> <p>Default: <code>false</code></p>"},{"location":"configuration/#debug","title":"<code>DEBUG</code>","text":"<p>Set to <code>true</code> to enable debugging mode, CLI messages and server logs will be more explicit.</p> <p>Default: <code>false</code></p> <p>Warning</p> <p>We strongly recommend to keep default <code>false</code> value when running Onzr outside from development.</p>"},{"location":"configuration/#schema","title":"<code>SCHEMA</code>","text":"<p>The server URL schema.</p> <p>Default: <code>http</code></p>"},{"location":"configuration/#host","title":"<code>HOST</code>","text":"<p>This is the host socket will be bind to. It can be an IPv4 or IPv6 address, or a fully qualified domain name (e.g. <code>onzr.example.org</code>). Set this to <code>0.0.0.0</code> if you want your application to be available from your local network.</p> <p>Default: <code>localhost</code></p>"},{"location":"configuration/#port","title":"<code>PORT</code>","text":"<p>This the host port the socket will be bind to.</p> <p>Default: <code>9473</code></p>"},{"location":"configuration/#api_root_url","title":"<code>API_ROOT_URL</code>","text":"<p>This the root URL Onzr server will respond from.</p> <p>Default: <code>/api/v1</code></p>"},{"location":"configuration/#track_stream_endpoint","title":"<code>TRACK_STREAM_ENDPOINT</code>","text":"<p>The URL pattern used for the track stream endpoint.</p> <p>Tip</p> <p>The <code>rank</code> variable is supposed to be injected in the template.</p> <p>Default: <code>/queue/{rank}/stream</code></p>"},{"location":"configuration/#deezer_blowfish_secret","title":"<code>DEEZER_BLOWFISH_SECRET</code>","text":"<p>This secret is used to decrypt Deezer track stream on the fly.</p> <p>Danger</p> <p>This secret is distributed with Onzr and is not supposed to be changed. You won't be able to stream your music if this value is falsy.</p>"},{"location":"configuration/#theme","title":"<code>THEME</code>","text":"<p>Onzr CLI uses colors defined in this theme.</p> <p>Default:</p> <pre><code>THEME:\n  # Base palette\n  primary_color: \"#9B6BDF\"\n  secondary_color: \"#75D7EC\"\n  tertiary_color: \"#E356A7\"\n  # Entities\n  title_color: \"#9B6BDF\"\n  artist_color: \"#75D7EC\"\n  album_color: \"#E356A7\"\n  # Messages\n  alert_color: \"red\"\n</code></pre> <p>Colors should be given as hexadecimal codes or names (e.g. <code>red</code>).</p>"},{"location":"contribute/","title":"Playing with the code","text":""},{"location":"contribute/#install-dependencies","title":"Install dependencies","text":"<p>Contributing to Onzr requires the following dependencies to be installed:</p> <ul> <li>GNU Make</li> <li><code>uv</code></li> <li>VLC</li> <li>VHS</li> </ul> <p>Note</p> <p>Depending on your operating system, use your favorite package manager (<code>brew</code>, <code>apt</code>, <code>pacman</code>, ...) to install them!</p>"},{"location":"contribute/#bootstrap-the-project","title":"Bootstrap the project","text":"<p>To quickly start contributing to this project, we've got you covered! Once you've forked/cloned the project, use GNU Make to ease your life:</p> <pre><code># Clone the forked project somewhere on your system\ngit clone git@github.com:my_username/onzr.git\n\n# Enter the project's root directory\ncd onzr\n\n# Prepare your working environment\nmake bootstrap\n</code></pre> <p>You can now start the development server:</p> <pre><code>make run\n</code></pre> <p>Test Onzr development server in a new terminal as the server is still running in the previous one:</p> <pre><code>uv run onzr artist 1 --top --ids | \\\n  uv run onzr add - &amp;&amp; \\\n  uv run onzr play\n</code></pre> <p>Musical quiz</p> <p>Enjoying what you ear? What is the artist who was given the ID <code>1</code>?</p>"},{"location":"contribute/#quality-checks","title":"Quality checks","text":"<p>You can run tests and linters using dedicated GNU Make rules:</p> <pre><code># Run the tests suite\nmake test\n\n# Linters!\nmake lint\n</code></pre> <p>Tip</p> <p>\ud83d\udca1 Don't be surprised to ear strange noises during tests execution \ud83d\ude05</p> <p>Happy hacking \ud83d\ude3b</p>"},{"location":"guidelines/","title":"Guidelines","text":"<p>Thank you for considering contributing to onzr! We appreciate your interest and support. This documentation provides guidelines on how to contribute effectively to our project.</p>"},{"location":"guidelines/#issues","title":"Issues","text":"<p>Issues are a valuable way to contribute. They can include bug reports, feature requests, and general questions or discussions. When creating or interacting with issues, please keep the following in mind:</p>"},{"location":"guidelines/#1-search-for-existing-issues","title":"1. Search for existing issues","text":"<p>Before creating a new issue, search the existing issues to see if your concern has already been raised. If you find a related issue, you can add your input or follow the discussion. Feel free to engage in discussions, offer help, or provide feedback on existing issues. Your input is valuable in shaping the project's future.</p>"},{"location":"guidelines/#2-creating-a-new-issue","title":"2. Creating a new issue","text":"<p>Use the provided issue template that fits the best to your concern. Provide as much information as possible when writing your issue. Your issue will be reviewed by a project maintainer and you may be offered to open a PR if you want to contribute to the code. If not, and if your issue is relevant, a contributor will apply the changes to the project. The issue will then be automatically closed when the PR is merged.</p> <p>Issues will be closed by project maintainers if they are deemed invalid. You can always reopen an issue if you believe it hasn't been adequately addressed.</p>"},{"location":"guidelines/#3-code-of-conduct-in-discussion","title":"3. Code of conduct in discussion","text":"<ul> <li>Be respectful and considerate when participating in discussions.</li> <li>Avoid using offensive language, and maintain a positive and collaborative   tone.</li> <li>Stay on topic and avoid derailing discussions.</li> </ul> <p>Note</p> <p>Before contributing, we invite you to read our complete code of conduct.</p>"},{"location":"guidelines/#discussions","title":"Discussions","text":"<p>Discussions in the onzr repository are a place for open-ended conversations, questions, and general community interactions. Here's how to effectively use discussions:</p>"},{"location":"guidelines/#1-creating-a-discussion","title":"1. Creating a discussion","text":"<ul> <li>Use a clear and concise title that summarizes the topic.</li> <li>In the description, provide context and details regarding the discussion.</li> <li>Use labels to categorize the discussion (e.g., \"question,\" \"general   discussion,\" \"announcements,\" etc.).</li> </ul>"},{"location":"guidelines/#2-participating-in-discussions","title":"2. Participating in discussions","text":"<ul> <li>Engage in conversations respectfully, respecting others' opinions.</li> <li>Avoid spamming or making off-topic comments.</li> <li>Help answer questions when you can.</li> </ul> <p>Note</p> <p>Before contributing, we invite you to read our complete code of conduct.</p>"},{"location":"guidelines/#pull-requests-pr","title":"Pull Requests (PR)","text":"<p>Contributing to onzr through pull requests is a powerful way to advance the project. If you want to make changes or add new features, please follow these steps to submit a PR:</p>"},{"location":"guidelines/#1-fork-the-repository","title":"1. Fork the repository","text":"<p>Begin by forking the project's repository.</p>"},{"location":"guidelines/#2-clone-the-fork","title":"2. Clone the fork","text":"<p>Clone the forked repository to your local machine and change the directory to the project folder using the following commands (replace <code>&lt;your_fork&gt;</code> with your GitHub username):</p> <pre><code>git clone https://github.com/&lt;your_fork&gt;/onzr.git\ncd onzr\n</code></pre>"},{"location":"guidelines/#3-create-a-new-branch","title":"3. Create a new branch","text":"<p>Create a new branch for your changes, ideally with a descriptive name:</p> <pre><code>git checkout -b your-new-feature\n</code></pre>"},{"location":"guidelines/#4-make-changes","title":"4. Make changes","text":"<p>Implement the changes or additions to the code, ensuring it follows coding and documentation standards.</p> <p>For comprehensive guidance on starting your development journey with onzr and preparing your pull request, please refer to our dedicated tutorials.</p> <p>When committing your changes, please adhere to OpenFUN commit practices. Follow the low granularity commit splitting approach and use commit messages based on the Angular commit message guidelines.</p>"},{"location":"guidelines/#5-push-changes","title":"5. Push changes","text":"<p>Push your branch to your GitHub repository:</p> <pre><code>git push origin feature/your-new-feature\n</code></pre>"},{"location":"guidelines/#6-create-a-pull-request","title":"6. Create a pull request","text":"<p>To initiate a Pull Request (PR), head to onzr project's GitHub repository and click on New Pull Request.</p> <p>Set your branch as the source and onzr project's <code>main</code> branch as the target.</p> <p>Provide a clear title for your PR and make use of the provided PR body template to document the changes made by your PR. This helps streamline the review process and maintain a well-documented project history.</p>"},{"location":"guidelines/#7-review-and-discussion","title":"7. Review and discussion","text":"<p>onzr project maintainers will review your PR. Be prepared to make necessary changes or address any feedback. Patience during this process is appreciated.</p>"},{"location":"guidelines/#8-merge","title":"8. Merge","text":"<p>Once your PR is approved, onzr maintainers will merge your changes into the main project. Congratulations, you've successfully contributed to onzr! \ud83c\udf89</p>"},{"location":"guidelines/#releases","title":"Releases","text":""},{"location":"guidelines/#working-on-a-new-release","title":"Working on a new release","text":"<p>This project follows OpenFUN's standard process to release a new version. We invite you to read their handbook that describes it into details.</p>"},{"location":"tutorial/","title":"Tutorial","text":"<p>In this tutorial, you will learn how to set up Onzr and the basic philosophy behind it.</p> <p>Tip</p> <p>While following this tutorial, you will be invited to type shell commands. Every command appears in a code block as follow:</p> <pre><code>echo \"Hello world!\"\n</code></pre> <p>You can copy or type them in your terminal and type return at the end of the instruction to execute them.</p>"},{"location":"tutorial/#install-onzr","title":"Install Onzr","text":""},{"location":"tutorial/#requirements","title":"Requirements","text":"<p>Onzr is a Python package, but it depends on VLC media player to play your music. You need to make sure it's installed on your machine; don't be afraid most (every?) operating systems are compatible.</p> <p>Python should also be installed in your machine. If you are using a UNIX-based operating system such as MacOS or GNU/Linux, it should already be installed. Make sure your version of python is at least Python <code>11.0</code> by typing the following command in your favorite terminal:</p> <pre><code>python --version\n</code></pre> <p>Example output may be something like: <code>Python 3.12.8</code></p>"},{"location":"tutorial/#install-onzr-in-your-user-space","title":"Install Onzr in your user space","text":"<p>Tip</p> <p>Make sure <code>pip</code> is installed for your Python version by typing the following command in a terminal:</p> <pre><code>pip --version\n</code></pre> <p>This command should not fail and the output may look like:</p> <pre><code>pip 25.1.1 from /home/julien/.local/lib/python3.12/site-packages/pip (python 3.12)\n</code></pre> <p>If <code>pip</code> is not installed, please follow the official documentation to install it.</p> <p>We will use the <code>pip</code> package manager to install <code>onzr</code> in your user space:</p> <pre><code>pip install --user onzr\n</code></pre> <p>Use your preferred installation method</p> <p>In this tutorial, we invite you to install Onzr in your user space, but you can choose to install it globally (for all users), or using another package manager than Pip. It's up to you to choose the most convenient method to install a Python package in your machine.</p> <p>Once installed, the <code>onzr</code> command can be called from your favorite terminal. You can test it by typing:</p> <pre><code>onzr --help\n</code></pre>"},{"location":"tutorial/#configure-onzr","title":"Configure Onzr","text":"<p>A basic configuration file is required to run Onzr. It should be created once using the dedicated <code>init</code> command.</p> <p>Tip</p> <p>Before running this command, we invite you to get your ARL token that will be used to authenticate your requests to the Deezer API. This token value can be found stored in a session cookie once connected to deezer.com using your favorite web browser (see detailed instructions).</p> <pre><code>onzr init\n</code></pre> <p>When prompted, copy/paste your ARL token and validate by pressing Enter</p> <p>That's it: Onzr is now configured \ud83c\udf89 A configuration file (<code>settings.yaml</code>) should have been generated at the following path (depending on your OS):</p> <ul> <li>MacOS: <code>~/Library/Application Support/onzr/settings.yaml</code></li> <li>Windows: <code>%appdata%\\watson\\config</code>, which usually expands to <code>C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\onzr\\settings.yaml</code></li> <li>Linux: <code>~/.config/onzr/settings.yaml</code></li> </ul> <p>You can check the configuration path using the <code>config -p</code> command:</p> <pre><code>onzr config -p\n</code></pre> <p>And the configuration content using:</p> <pre><code>onzr config\n</code></pre> <p>You should see at least two defined settings:</p> <pre><code>ARL: \"your-arl-token\"\nDEEZER_BLOWFISH_SECRET: \"supersecret\"\n</code></pre> <p>Edit your configuration</p> <p>Feel free to customize Onzr's behavior by changing your settings such as the default audio quality:</p> <pre><code>ARL: \"your-arl-token\"\nDEEZER_BLOWFISH_SECRET: \"supersecret\"\nQUALITY: \"FLAC\"\n</code></pre> <p>Configuration can be edited using the <code>onzr config -e</code> command.</p> <p>For a complete list of configurable settings and configuration tips, please refer to the configuration documentation.</p>"},{"location":"tutorial/#run-the-web-server","title":"Run the web server","text":"<p>Onzr has been designed as a web server that streams and plays your music using FastAPI and VLC respectively. It provides an HTTP API to interact with it, e.g. control the player and the tracks queue.</p> <p>To use Onzr you should run the web server by using the <code>serve</code> command:</p> <pre><code>onzr serve\n</code></pre> <p>If Onzr is properly installed and configured, you should see logs from the web server displayed in your terminal. And as it's running as a foreground process, you will need to start a new terminal to run new commands to act on it.</p> <p>Tip</p> <p>If you want to run the Onzr server as a background process, we recommend to lower the log-level so that it won't disturb your terminal flow:</p> <pre><code>onzr serve --log-level error &amp;\n</code></pre> <p>Make sure Onzr server is running by using the <code>state</code> command:</p> <pre><code>onzr state\n</code></pre> <p>If the server is up and running, you should get a description of the server state. Meaning we can start playing with it and stream our favorite tracks.</p>"},{"location":"tutorial/#search-albums-artists-and-tracks","title":"Search albums, artists and tracks","text":"<p>Onzr CLI uses Deezer API to explore available music tracks. When beginning with Onzr, the first step is often a search. Let's say you want to explore Radiohead's discography. The first step is to get its artist identifier (ID):</p> <pre><code>onzr search --artist Radiohead\n</code></pre> <p>The command output should look like:</p> <p></p> <p>The identifier we are interested in for Radiohead is <code>399</code>. We can then use this identifier to explore the artist top tracks:</p> <pre><code>onzr artist 399\n</code></pre> <p>The output should look like:</p> <p></p> <p>In this top track list, we can find the track identifiers, title and album.</p> <p>Pro tip for power users \u2122</p> <p>An alternative way to achieve the previous suite of commands is to leverage the power of UNIX shells by using the pipe operator (<code>|</code> character) that send the output of a command as input of another command (we say it is \"piped\" to the second command):</p> <pre><code>onzr search --artist Radiohead --ids | # (1) \\\n    head -n 1 | # (2) \\\n    onzr artist - # (3)\n</code></pre> <ol> <li>Only display identifiers using the <code>--ids</code> option</li> <li>Restrict to the first match using <code>head</code> command</li> <li>Use the <code>-</code> special flag so that Onzr expects identifiers coming from the standard input</li> </ol> <p>And if we want the artist discography, we can use the <code>--albums</code> option:</p> <pre><code>onzr artist --albums --limit 20 399 # (1)\n</code></pre> <ol> <li>The <code>--limit</code> option is used here to avoid being limited to the 10 latest    albums (API default page size it <code>10</code>).</li> </ol> <p>The output should look like:</p> <p></p> <p>I hear you from here saying:</p> <p>\u2014 Ok that great, but we are here to listen to music, not get creepy identifiers!</p> <p>Loud and clear, let's continue to the next section to listen good music!</p>"},{"location":"tutorial/#add-tracks-to-queue","title":"Add tracks to queue","text":"<p>Onzr queue should be considered as a volatile playlist that you can modify on-the-fly. You may add tracks to the queue using the <code>add</code> command:</p> <pre><code>onzr add 138539157\n</code></pre> <p>In this case, we've added the track with the <code>138539157</code> identifier to the queue. Since you may not remember Deezer identifier from your favorite tracks, the <code>add</code> command is often the last command of a more complete pipeline, e.g.:</p> <pre><code>onzr search --artist \"Radiohead\" --ids --first | # (1) \\\n    onzr artist --top --ids - | # (2) \\\n    onzr add - # (3)\n</code></pre> <ol> <li>Note that we use the <code>--ids</code> option to only display artists identifiers</li> <li>Note that we use the <code>--ids</code> option to only display tracks identifiers</li> <li>Note that the <code>add</code> command also accepts the <code>-</code> special operator to read    identifiers from the standard input (<code>stdint</code>)</li> </ol> <p>In this case, we will add Radiohead's top-10 tracks to the queue. This is a classical pipeline.</p> <p>Tip</p> <p>If you want a fresh start and remove all queued tracks, use the <code>clear</code> command:</p> <pre><code>onzr clear\n</code></pre> <p>Note that this will also stop the player.</p>"},{"location":"tutorial/#enjoy-your-music","title":"Enjoy your music","text":"<p>Once you filled Onzr's queue, you can start playing it!</p> <pre><code>onzr play\n</code></pre> <p>By default, if the queue has just been filled and left untouched, the <code>play</code> command will start playing the first track. If the player is paused, it will resume playing.</p> <p>If you prefer playing a particular queued track, you can also start playing from its rank in the queue. To get the list of queued tracks, you can use the <code>queue</code> command, get the rank of your favorite track and then play it:</p> <pre><code>onzr queue\n</code></pre> <p>The output should look like:</p> <p></p> <p>If you want to start playing Jigsaw Falling Into Place use its rank:</p> <pre><code>onzr play --rank 7\n</code></pre>"},{"location":"tutorial/#control-the-player","title":"Control the player","text":"<p>As you may expect, there are few commands that do what they say to control the player:</p> <ul> <li><code>pause</code>: toggle pause</li> <li><code>next</code>: play next track in queue</li> <li><code>previous</code>: play previous track in queue</li> <li><code>stop</code>: stop the player without clearing the queue</li> </ul> <p>Tip</p> <p>If you want to follow currenly played tracks in real-time you may use the <code>now</code> command:</p> <pre><code>onzr now -f\n</code></pre>"},{"location":"tutorial/#create-playlists-on-the-fly","title":"Create playlists on-the-fly","text":"<p>One last thing: the <code>mix</code> command is Onzr's secret sauce! This command can create playlists on the fly given a list of artists names. Let's see it in action:</p> <pre><code>onzr mix \"avishai cohen\" \"go go penguin\" \"yom\" --limit 20 --ids | # (1) \\\n    shuf | # (2) \\\n    shuf | \\\n    onzr add -\n</code></pre> <ol> <li>Note that we use quotes for each artist (since they may have spaces or    special characters in their names)</li> <li>The <code>shuf</code> command shuffles standard input lines</li> </ol> <p>With this command we add 60 tracks to the queue (20 tracks per artist) in a random order. By default, we consider the <code>--limit</code> first artist's top-tracks (defaults to 10).</p> <p>So if you want to go deeper and discover artists inspired from the ones you choose, use the <code>--deep</code> option to get tracks from each artist's radio. There is a great chance that you discover new sounds:</p> <pre><code>onzr mix --deep \"avishai cohen\" \"go go penguin\" \"yom\" --limit 20 --ids | \\\n    shuf | \\\n    shuf | \\\n    onzr add -\n</code></pre> <p>Tip</p> <p>The cool thing about this <code>mix --deep</code> command is that if you run it twice, you won't have the same mix, since artist's radio are randomly created.</p>"}]}